version: '3'

vars:
  LINUXBOOT_KERNEL_CONFIG: contrib/linuxboot.defconfig

tasks:

  kernel-prebuilt:
    cmds:
      - mkdir -p out/artifacts
      - cp {{.PREBUILT_KERNEL}} {{.STBOOT_LINUX_KERNEL}}
    preconditions:
      - sh: '[ -f "{{.PREBUILT_KERNEL}}" ]'
        msg: |-
          [ERROR] linux configuration file {{.LINUXBOOT_KERNEL_CONFIG}} missing.
    vars:
      PREBUILT_KERNEL: contrib/linuxboot.vmlinuz
